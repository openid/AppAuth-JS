"use strict";
/*
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the
 * License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
var token_response_1 = require("./token_response");
describe('Token Response tests', function () {
    var accessToken = 'accessToken';
    var idToken = 'idToken';
    it('Basic Token Response Tests', function () {
        var response = new token_response_1.TokenResponse(accessToken, idToken);
        expect(response).not.toBeNull();
        expect(response.accessToken).toBe(accessToken);
        expect(response.idToken).toBe(idToken);
        expect(response.tokenType).toBe('bearer');
        expect(response.issuedAt).toBeTruthy();
        expect(response.isValid()).toBe(true);
        expect(response.refreshToken).toBeFalsy();
        expect(response.scope).toBeFalsy();
    });
    it('Test response token validity', function () {
        var response = new token_response_1.TokenResponse(accessToken, idToken, undefined /* refresh token */, undefined /* scope */, 'bearer', 1 /* issued at */, 1000 /* expires in*/);
        expect(response).not.toBeNull();
        expect(response.accessToken).toBe(accessToken);
        expect(response.idToken).toBe(idToken);
        expect(response.tokenType).toBe('bearer');
        expect(response.issuedAt).toBeTruthy();
        expect(response.isValid()).toBe(false);
        expect(response.refreshToken).toBeFalsy();
        expect(response.scope).toBeFalsy();
    });
    it('To Json() and from Json() should work', function () {
        var response = new token_response_1.TokenResponse(accessToken, idToken);
        var json = JSON.parse(JSON.stringify(response.toJson()));
        var newResponse = token_response_1.TokenResponse.fromJson(json);
        expect(newResponse).not.toBeNull();
        expect(newResponse.accessToken).toBe(accessToken);
        expect(newResponse.idToken).toBe(idToken);
        expect(newResponse.tokenType).toBe('bearer');
        expect(newResponse.issuedAt).toBeTruthy();
        expect(newResponse.isValid()).toBe(true);
        expect(newResponse.refreshToken).toBeFalsy();
        expect(newResponse.scope).toBeFalsy();
    });
    it('Basic Token Error Tests', function () {
        var error = new token_response_1.TokenError('invalid_client');
        expect(error).toBeTruthy();
        expect(error.error).toBe('invalid_client');
        expect(error.errorDescription).toBeFalsy();
        expect(error.errorUri).toBeFalsy();
    });
    it('To Json and from JSON should work for errors', function () {
        var error = new token_response_1.TokenError('invalid_client');
        var json = JSON.parse(JSON.stringify(error.toJson()));
        var newError = token_response_1.TokenError.fromJson(json);
        expect(newError).toBeTruthy();
        expect(newError.error).toBe('invalid_client');
        expect(newError.errorDescription).toBeFalsy();
        expect(newError.errorUri).toBeFalsy();
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9rZW5fcmVzcG9uc2VfdGVzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy90b2tlbl9yZXNwb25zZV90ZXN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7O0dBWUc7O0FBRUgsbURBQTJEO0FBRTNELFFBQVEsQ0FBQyxzQkFBc0IsRUFBRTtJQUMvQixJQUFNLFdBQVcsR0FBRyxhQUFhLENBQUM7SUFDbEMsSUFBTSxPQUFPLEdBQUcsU0FBUyxDQUFDO0lBRTFCLEVBQUUsQ0FBQyw0QkFBNEIsRUFBRTtRQUMvQixJQUFJLFFBQVEsR0FBRyxJQUFJLDhCQUFhLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1FBQ3ZELE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxHQUFHLENBQUMsUUFBUSxFQUFFLENBQUM7UUFDaEMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7UUFDL0MsTUFBTSxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdkMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDMUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxVQUFVLEVBQUUsQ0FBQztRQUN2QyxNQUFNLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDMUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUNyQyxDQUFDLENBQUMsQ0FBQztJQUVILEVBQUUsQ0FBQyw4QkFBOEIsRUFBRTtRQUNqQyxJQUFJLFFBQVEs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LENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUM3QyxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztRQUN0RCxJQUFJLFFBQVEsR0FBRywyQkFBVSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUN6QyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDOUIsTUFBTSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsQ0FBQztRQUM5QyxNQUFNLENBQUMsUUFBUSxDQUFDLGdCQUFnQixDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7UUFDOUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxRQUFRLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQztJQUN4QyxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLypcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIEluYy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTsgeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHRcclxuICogaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlXHJcbiAqIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLCBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyXHJcbiAqIGV4cHJlc3Mgb3IgaW1wbGllZC4gU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcblxyXG5pbXBvcnQge1Rva2VuRXJyb3IsIFRva2VuUmVzcG9uc2V9IGZyb20gJy4vdG9rZW5fcmVzcG9uc2UnO1xyXG5cclxuZGVzY3JpYmUoJ1Rva2VuIFJlc3BvbnNlIHRlc3RzJywgKCkgPT4ge1xyXG4gIGNvbnN0IGFjY2Vzc1Rva2VuID0gJ2FjY2Vzc1Rva2VuJztcclxuICBjb25zdCBpZFRva2VuID0gJ2lkVG9rZW4nO1xyXG5cclxuICBpdCgnQmFzaWMgVG9rZW4gUmVzcG9uc2UgVGVzdHMnLCAoKSA9PiB7XHJcbiAgICBsZXQgcmVzcG9uc2UgPSBuZXcgVG9rZW5SZXNwb25zZShhY2Nlc3NUb2tlbiwgaWRUb2tlbik7XHJcbiAgICBleHBlY3QocmVzcG9uc2UpLm5vdC50b0JlTnVsbCgpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlLmFjY2Vzc1Rva2VuKS50b0JlKGFjY2Vzc1Rva2VuKTtcclxuICAgIGV4cGVjdChyZXNwb25zZS5pZFRva2VuKS50b0JlKGlkVG9rZW4pO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlLnRva2VuVHlwZSkudG9CZSgnYmVhcmVyJyk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UuaXNzdWVkQXQpLnRvQmVUcnV0aHkoKTtcclxuICAgIGV4cGVjdChyZXNwb25zZS5pc1ZhbGlkKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UucmVmcmVzaFRva2VuKS50b0JlRmFsc3koKTtcclxuICAgIGV4cGVjdChyZXNwb25zZS5zY29wZSkudG9CZUZhbHN5KCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdUZXN0IHJlc3BvbnNlIHRva2VuIHZhbGlkaXR5JywgKCkgPT4ge1xyXG4gICAgbGV0IHJlc3BvbnNlID0gbmV3IFRva2VuUmVzcG9uc2UoXHJcbiAgICAgICAgYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgaWRUb2tlbixcclxuICAgICAgICB1bmRlZmluZWQgLyogcmVmcmVzaCB0b2tlbiAqLyxcclxuICAgICAgICB1bmRlZmluZWQgLyogc2NvcGUgKi8sXHJcbiAgICAgICAgJ2JlYXJlcicsXHJcbiAgICAgICAgMSAvKiBpc3N1ZWQgYXQgKi8sXHJcbiAgICAgICAgMTAwMCAvKiBleHBpcmVzIGluKi9cclxuICAgICk7XHJcblxyXG4gICAgZXhwZWN0KHJlc3BvbnNlKS5ub3QudG9CZU51bGwoKTtcclxuICAgIGV4cGVjdChyZXNwb25zZS5hY2Nlc3NUb2tlbikudG9CZShhY2Nlc3NUb2tlbik7XHJcbiAgICBleHBlY3QocmVzcG9uc2UuaWRUb2tlbikudG9CZShpZFRva2VuKTtcclxuICAgIGV4cGVjdChyZXNwb25zZS50b2tlblR5cGUpLnRvQmUoJ2JlYXJlcicpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlLmlzc3VlZEF0KS50b0JlVHJ1dGh5KCk7XHJcbiAgICBleHBlY3QocmVzcG9uc2UuaXNWYWxpZCgpKS50b0JlKGZhbHNlKTtcclxuICAgIGV4cGVjdChyZXNwb25zZS5yZWZyZXNoVG9rZW4pLnRvQmVGYWxzeSgpO1xyXG4gICAgZXhwZWN0KHJlc3BvbnNlLnNjb3BlKS50b0JlRmFsc3koKTtcclxuICB9KTtcclxuXHJcbiAgaXQoJ1RvIEpzb24oKSBhbmQgZnJvbSBKc29uKCkgc2hvdWxkIHdvcmsnLCAoKSA9PiB7XHJcbiAgICBsZXQgcmVzcG9uc2UgPSBuZXcgVG9rZW5SZXNwb25zZShhY2Nlc3NUb2tlbiwgaWRUb2tlbik7XHJcbiAgICBsZXQganNvbiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UudG9Kc29uKCkpKTtcclxuICAgIGxldCBuZXdSZXNwb25zZSA9IFRva2VuUmVzcG9uc2UuZnJvbUpzb24oanNvbik7XHJcbiAgICBleHBlY3QobmV3UmVzcG9uc2UpLm5vdC50b0JlTnVsbCgpO1xyXG4gICAgZXhwZWN0KG5ld1Jlc3BvbnNlLmFjY2Vzc1Rva2VuKS50b0JlKGFjY2Vzc1Rva2VuKTtcclxuICAgIGV4cGVjdChuZXdSZXNwb25zZS5pZFRva2VuKS50b0JlKGlkVG9rZW4pO1xyXG4gICAgZXhwZWN0KG5ld1Jlc3BvbnNlLnRva2VuVHlwZSkudG9CZSgnYmVhcmVyJyk7XHJcbiAgICBleHBlY3QobmV3UmVzcG9uc2UuaXNzdWVkQXQpLnRvQmVUcnV0aHkoKTtcclxuICAgIGV4cGVjdChuZXdSZXNwb25zZS5pc1ZhbGlkKCkpLnRvQmUodHJ1ZSk7XHJcbiAgICBleHBlY3QobmV3UmVzcG9uc2UucmVmcmVzaFRva2VuKS50b0JlRmFsc3koKTtcclxuICAgIGV4cGVjdChuZXdSZXNwb25zZS5zY29wZSkudG9CZUZhbHN5KCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdCYXNpYyBUb2tlbiBFcnJvciBUZXN0cycsICgpID0+IHtcclxuICAgIGxldCBlcnJvciA9IG5ldyBUb2tlbkVycm9yKCdpbnZhbGlkX2NsaWVudCcpO1xyXG4gICAgZXhwZWN0KGVycm9yKS50b0JlVHJ1dGh5KCk7XHJcbiAgICBleHBlY3QoZXJyb3IuZXJyb3IpLnRvQmUoJ2ludmFsaWRfY2xpZW50Jyk7XHJcbiAgICBleHBlY3QoZXJyb3IuZXJyb3JEZXNjcmlwdGlvbikudG9CZUZhbHN5KCk7XHJcbiAgICBleHBlY3QoZXJyb3IuZXJyb3JVcmkpLnRvQmVGYWxzeSgpO1xyXG4gIH0pO1xyXG5cclxuICBpdCgnVG8gSnNvbiBhbmQgZnJvbSBKU09OIHNob3VsZCB3b3JrIGZvciBlcnJvcnMnLCAoKSA9PiB7XHJcbiAgICBsZXQgZXJyb3IgPSBuZXcgVG9rZW5FcnJvcignaW52YWxpZF9jbGllbnQnKTtcclxuICAgIGxldCBqc29uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlcnJvci50b0pzb24oKSkpO1xyXG4gICAgbGV0IG5ld0Vycm9yID0gVG9rZW5FcnJvci5mcm9tSnNvbihqc29uKTtcclxuICAgIGV4cGVjdChuZXdFcnJvcikudG9CZVRydXRoeSgpO1xyXG4gICAgZXhwZWN0KG5ld0Vycm9yLmVycm9yKS50b0JlKCdpbnZhbGlkX2NsaWVudCcpO1xyXG4gICAgZXhwZWN0KG5ld0Vycm9yLmVycm9yRGVzY3JpcHRpb24pLnRvQmVGYWxzeSgpO1xyXG4gICAgZXhwZWN0KG5ld0Vycm9yLmVycm9yVXJpKS50b0JlRmFsc3koKTtcclxuICB9KTtcclxufSk7XHJcbiJdfQ==